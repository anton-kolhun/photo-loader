<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>"Ми робимо фотографії, щоб зрозуміти, що для нас означає наше життя". - Ральф Хаттерслі.</title>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
  <script src="js/jquery.js" type="text/javascript"></script>

  <script type="text/javascript" src="js/bootstrap.min.js"></script>

</head>

<body>
<div class="container">
  <div class="form-group flex flex-row">
    <button id="loader" style="height:160px;width:4`:put 00px;font-size:35px;margin-right:10px"
            class="btn btn-primary btn-lg btn-block" onclick="loadImage()">Хочу наступне фото!
    </button>
    <select name="year" id="year" style="height:150px;width:180px;font-size:30px">
      <option value="all">Всі фото</option>
      <option value="2021">2021</option>
      <option value="2020">2020</option>
      <option value="2019">2019</option>
      <option value="2018">2018</option>
      <option value="2017">2017</option>
      <option value="2016">2016</option>
      <option value="2015">2015</option>
      <option value="2014">2014</option>
    </select>
    <div id="spinner" style="width: 5rem; height: 5rem;" class="spinner-border text-primary" role="status">
    </div>
  </div>
  <div id="img_holder">
    <img id="img" alt="">
  </div>
</div>
</body>
<script type="text/javascript">
    function loadImage() {
       $('#loader').prop('disabled', true);
       $('#spinner').show();
       var year = $('#year').val();
       var url = 'image';
       url = url + '?height=' + window.screen.height;
       url = url + '&width=' + window.screen.width;
       if (year != 'all') {
         url = url + '&year=' + year;
       }
       $.get(url, function(data, status){
           if (data.includes('login')) {
             location.href='login'
           }
           $('#img').attr("src", 'data:image/png;base64, ' + data);
           $('#loader').prop('disabled', false);
           $('#spinner').hide();
       })
       .fail(function() {
          $('#loader').prop('disabled', false);
          $('#spinner').hide();
       })
    }
    $( document ).ready(function() {
       loadImage();
     });






















</script>
</html>