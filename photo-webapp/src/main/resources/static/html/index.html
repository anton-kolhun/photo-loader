<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Цінуємо - що маємо!</title>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
  <script src="js/jquery.js" type="text/javascript"></script>

  <script type="text/javascript" src="js/bootstrap.min.js"></script>

</head>

<body>
<div class="container">
  <div class="form-group flex flex-row">
    <button id="loader" style="height:200px;width:500px;font-size:40px;margin-right:10px"
            class="btn btn-primary btn-lg btn-block" onclick="loadImage()">Хочу наступне фото!
    </button>
    <select name="year" id="year" style="height:150px;width:180px;font-size:30px">
      <option value="all">Всі фото</option>
      <option value="2021">2021</option>
      <option value="2020">2020</option>
      <option value="2019">2019</option>
      <option value="2018">2018</option>
      <option value="2017">2017</option>
      <option value="2016">2016</option>
      <option value="2015">2015</option>
      <option value="2014">2014</option>
    </select>
  </div>
  <div id="img_holder">
    <img id="img" alt="memory">
  </div>
</div>
</body>
<script type="text/javascript">
    function loadImage() {
       $('#loader').prop('disabled', true);
       var year = $('#year').val();
       var url
       if (year == 'all') {
         url = 'image';
       } else {
         url = 'image?year=' + year;
         }
       $.get(url, function(data, status){
           $('#img').attr("src", 'data:image/png;base64, ' + data);
           $('#loader').prop('disabled', false);
       })
       .fail(function() {
          $('#loader').prop('disabled', false);
       })
    }
    $( document ).ready(function() {
       loadImage()
     });




















</script>
</html>